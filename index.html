<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather App</title>
</head>
<body>
  <h1>Weather Search</h1>

  <!-- Search Form -->
  <input type="text" id="city" placeholder="Enter city name">
  <button onclick="searchCity()">Search</button>

  <div id="weather"></div>

  <script>
    async function searchCity() {
      const city = document.getElementById("city").value;
      if (!city) {
        alert("Please enter a city name");
        return;
      }

      // 1. Geocode city → latitude & longitude
      const geoUrl = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`;
      const geoRes = await fetch(geoUrl);
      const geoData = await geoRes.json();

      if (!geoData.results || geoData.results.length === 0) {
        document.getElementById("weather").innerHTML = "<p>City not found.</p>";
        return;
      }

      const { latitude, longitude, name, country } = geoData.results[0];

      // 2. Fetch weather for those coordinates
      const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&hourly=temperature_2m`;
      const weatherRes = await fetch(weatherUrl);
      const weatherData = await weatherRes.json();

      // 3. Extract data
      const times = weatherData.hourly.time;
      const temps = weatherData.hourly.temperature_2m;

      // 4. Show results (first 10 entries)
      let html = `<h2>Weather for ${name}, ${country}</h2><ul>`;
      for (let i = 0; i < 10; i++) {
        html += `<li>${times[i]} → ${temps[i]} °C</li>`;
      }
      html += "</ul>";

      document.getElementById("weather").innerHTML = html;
    }
  </script>
</body>
</html>
